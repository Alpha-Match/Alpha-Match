# 🚀 개발 우선순위 및 로드맵

**작성일:** 2025-12-10
**업데이트:** 2025-12-10

---

## Phase 1: gRPC 통신 검증 ✅ (현재 단계)

### 목표
Batch Server와 Python AI Server 간 gRPC Streaming 통신 성공 확인

### 작업 항목
- [x] Batch Server 기본 구조 설계
- [x] Proto 파일 작성 (embedding_stream.proto, cache_service.proto)
- [x] gRPC Client 구현 (EmbeddingGrpcClient, CacheInvalidateGrpcClient)
- [x] Domain Layer 구현 (Entity, Repository)
- [x] Config 설정 (ExecutorConfig, GrpcClientConfig, BatchProperties)
- [ ] 🔄 Python Demo Server 구현
- [ ] ⏳ Application Services 구현
- [ ] ⏳ Batch Job/Step 구성
- [ ] ⏳ 통신 테스트 (Python ↔ Batch)
- [ ] ⏳ 간단한 데이터 수신/저장 검증

### 성공 기준
- Python 서버에서 10,000개 레코드 전송 성공
- Batch 서버에서 모든 데이터 수신 및 DB 저장 완료
- Checkpoint 기능 동작 확인

---

## Phase 2: Batch 서버 완성 ⏳

### 목표
완전히 동작하는 Batch 서버 구현

### 작업 항목
- [ ] Application Services 구현
  - [ ] StreamingService: gRPC Stream 수신
  - [ ] ChunkProcessor: Chunk 처리 및 분리
  - [ ] CacheSyncService: 캐시 무효화
- [ ] Spring Batch 구성
  - [ ] Job: EmbeddingBatchJob
  - [ ] Step: ReceiveStep, ProcessStep, NotifyStep
  - [ ] Listener: JobListener, StepListener
- [ ] BatchScheduler 구현
  - [ ] Cron 설정 (매일 새벽 2시)
  - [ ] 수동 실행 API
- [ ] DLQ 처리 로직
- [ ] 재시도 메커니즘
- [ ] 모니터링 로그

### 성공 기준
- 100,000개 이상 대용량 데이터 처리 성공
- DLQ 정상 동작 확인
- Checkpoint 기반 재시작 검증
- 스케줄러 정상 실행

---

## Phase 3: API 서버 구현 ⏳

### 목표
GraphQL API 서버 및 캐싱 시스템 구현

### 작업 항목

#### 3.1 프로젝트 설정
- [ ] Spring Boot 4.0 + WebFlux 프로젝트 생성
- [ ] 의존성 설정 (GraphQL, R2DBC, gRPC 등)
- [ ] application.yml 설정

#### 3.2 GraphQL 구현
- [ ] Schema 설계 (schema.graphqls)
- [ ] Domain Model 구현
- [ ] R2DBC Repository 구현
- [ ] Resolver 구현 (Query, Mutation)
- [ ] Error Handling

#### 3.3 캐싱 구현
- [ ] Caffeine 설정 (L1 Cache)
- [ ] Redis 연동 (L2 Cache)
- [ ] Cache Service 구현
- [ ] Cache Key 전략 수립

#### 3.4 gRPC 구현
- [ ] gRPC Server: 캐시 무효화 수신
- [ ] gRPC Client: AI Backend 연동 (추후)
- [ ] 동시성 제어 (Monitor Lock)

#### 3.5 pgvector 검색
- [ ] Vector Similarity Query 구현
- [ ] IVFFlat 인덱스 최적화
- [ ] 성능 테스트

### 성공 기준
- GraphQL 쿼리 정상 동작
- 캐싱 Hit Rate 80% 이상
- Vector 검색 응답 시간 100ms 이내
- Batch 서버로부터 캐시 무효화 정상 수신

---

## Phase 4: Frontend 구현 ⏳

### 목표
Next.js 기반 사용자 인터페이스 구현

### 작업 항목

#### 4.1 프로젝트 설정
- [ ] Next.js 16.0.7 프로젝트 생성
- [ ] TypeScript 설정
- [ ] 디렉토리 구조 설정

#### 4.2 GraphQL Client 연동
- [ ] GraphQL Client 설정 (urql or Apollo)
- [ ] Query/Mutation 정의
- [ ] React Query 통합

#### 4.3 UI 구현
- [ ] 레이아웃 구성
- [ ] 검색 페이지
  - [ ] 검색 입력 폼
  - [ ] 필터링 (경력, 영어 레벨 등)
  - [ ] 검색 결과 리스트
- [ ] 상세 페이지
  - [ ] 채용 공고 상세 정보
  - [ ] 유사 공고 추천
- [ ] 반응형 디자인

#### 4.4 최적화
- [ ] React Query 캐싱 전략
- [ ] 이미지 최적화
- [ ] Code Splitting
- [ ] SEO 최적화

### 성공 기준
- 검색 기능 정상 동작
- 페이지 로딩 시간 1초 이내
- 모바일 반응형 완벽 지원
- Lighthouse Score 90점 이상

---

## Phase 5: 통합 테스트 및 배포 ⏳

### 작업 항목
- [ ] 통합 테스트
  - [ ] E2E 시나리오 작성
  - [ ] 부하 테스트 (JMeter, K6)
  - [ ] 성능 벤치마크
- [ ] Docker 컨테이너화
  - [ ] 각 서버별 Dockerfile
  - [ ] docker-compose.yml
- [ ] CI/CD 파이프라인
  - [ ] GitHub Actions 설정
  - [ ] 자동 테스트
  - [ ] 자동 배포
- [ ] 모니터링
  - [ ] Prometheus + Grafana
  - [ ] 로그 수집 (ELK Stack)
  - [ ] 알림 설정 (Slack)

### 성공 기준
- 모든 서버 정상 통신 확인
- 1000 TPS 처리 성공
- 안정적인 배포 프로세스 구축

---

## 우선순위 요약

| Phase | 우선순위 | 상태 | 예상 기간 |
|-------|---------|-----|----------|
| Phase 1 | 🚨 **최우선** | 🔄 진행 중 | 1~2일 |
| Phase 2 | 🔥 **높음** | ⏳ 대기 | 3~4일 |
| Phase 3 | ⚡ **중간** | ⏳ 대기 | 5~7일 |
| Phase 4 | 📱 **중간** | ⏳ 대기 | 4~5일 |
| Phase 5 | 🔧 **낮음** | ⏳ 대기 | 2~3일 |

**총 예상 기간:** 15~21일

---

## 다음 단계 (Immediate Next Steps)

### 🚨 지금 바로 해야 할 일

1. **Python Demo Server 완성** (1~2시간)
   - requirements.txt 설정
   - Proto 컴파일
   - grpc_server.py 구현
   - 테스트 데이터 생성

2. **Batch Server Application Services** (3~4시간)
   - StreamingService 구현
   - ChunkProcessor 구현
   - CacheSyncService 구현

3. **통신 테스트** (1시간)
   - Python 서버 실행
   - Batch 서버 실행
   - gRPC 스트리밍 검증

---

## 관련 문서
- [시스템 아키텍처](./시스템_아키텍처.md)
- [데이터 플로우](./데이터_플로우.md)
